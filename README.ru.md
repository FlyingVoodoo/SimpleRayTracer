# SimpleRayTracer

üé® –ü—Ä–æ—Å—Ç–æ–π CPU —Ä–µ–π—Ç—Ä–µ–π—Å–µ—Ä –Ω–∞ C++17: —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ª—É—á–µ–π, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –¥–∏—Ñ—Ñ—É–∑–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ –∞–Ω—Ç–∏–∞–ª–∏–∞—Å–∏–Ω–≥. –û—Ç –ª—É—á–∞ –¥–æ –ø–∏–∫—Å–µ–ª—è –∑–∞ 10 —Å–µ–∫—É–Ω–¥.

[English](README.md) | **–†—É—Å—Å–∫–∏–π**

## üé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

![Rendered Scene](output.png)

*–î–≤–µ —Å—Ñ–µ—Ä—ã —Å –¥–∏—Ñ—Ñ—É–∑–Ω—ã–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º –Ω–µ–±–æ–º*

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ª—É—á–µ–π** —Å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ–º —Å—Ñ–µ—Ä
- ‚úÖ **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —è–¥—Ä–∞ CPU)
- ‚úÖ **–ê–Ω—Ç–∏–∞–ª–∏–∞—Å–∏–Ω–≥** —á–µ—Ä–µ–∑ —Å–ª—É—á–∞–π–Ω—ã–π —Å—ç–º–ø–ª–∏–Ω–≥ (configurable samples per pixel)
- ‚úÖ **–î–∏—Ñ—Ñ—É–∑–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ** —Å ambient + diffuse –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ **–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–µ –Ω–µ–±–æ** (–±–µ–ª—ã–π ‚Üí –≥–æ–ª—É–±–æ–π)
- ‚úÖ **Gamma correction** –ø—Ä–∏ –≤—ã–≤–æ–¥–µ
- ‚úÖ **–®–∞–±–ª–æ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã** Vec3/Ray –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **C++17** (—à–∞–±–ª–æ–Ω—ã, std::thread, smart pointers)
- **CMake** (–∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞)
- **PPM —Ñ–æ—Ä–º–∞—Ç** (–ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- **Python + Pillow** (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ PNG)

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
SimpleRayTracer/
‚îú‚îÄ‚îÄ include/          # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ Vec3.hpp      # 3D –≤–µ–∫—Ç–æ—Ä (—à–∞–±–ª–æ–Ω–Ω—ã–π)
‚îÇ   ‚îú‚îÄ‚îÄ Ray.hpp       # –õ—É—á (origin + direction)
‚îÇ   ‚îú‚îÄ‚îÄ Hittable.hpp  # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Sphere.hpp    # –°—Ñ–µ—Ä–∞ (–Ω–∞—Å–ª–µ–¥—É–µ—Ç Hittable)
‚îÇ   ‚îú‚îÄ‚îÄ World.hpp     # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ —Å—Ü–µ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ Camera.hpp    # –ö–∞–º–µ—Ä–∞ —Å viewport
‚îÇ   ‚îú‚îÄ‚îÄ Render.hpp    # –§—É–Ω–∫—Ü–∏—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –ª—É—á–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils.hpp     # –£—Ç–∏–ª–∏—Ç—ã (writeColor, gamma)
‚îú‚îÄ‚îÄ inline/           # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Vec3.ipp      # –û–ø–µ—Ä–∞—Ç–æ—Ä—ã, dot, cross, normalize
‚îÇ   ‚îî‚îÄ‚îÄ Ray.ipp       # pointAtParameter
‚îú‚îÄ‚îÄ src/              # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ Sphere.cpp    # –ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –ª—É—á-—Å—Ñ–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ World.cpp     # –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–≥–æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ Render.cpp    # –†–∞—Å—á—ë—Ç —Ü–≤–µ—Ç–∞ –ø–∏–∫—Å–µ–ª—è
‚îî‚îÄ‚îÄ convert.py        # PPM ‚Üí PNG –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä
```

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **C++17** –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä (MSVC, GCC, Clang)
- **CMake** 3.15+
- **Python 3** + Pillow (–¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ PNG)

### Windows (MSVC)

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python
pip install Pillow numpy

# –°–±–æ—Ä–∫–∞
cmake -B build
cmake --build build --config Release

# –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
.\build\bin\Release\SimpleRayTracer.exe

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ PNG
python convert.py
```

### Linux/macOS

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install Pillow numpy

# –°–±–æ—Ä–∫–∞
cmake -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build

# –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
./build/bin/SimpleRayTracer

# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
python3 convert.py
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `src/main.cpp` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```cpp
const int image_width = 800;           // –®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const int image_height = 450;          // –í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const int samples_per_pixel = 100;     // –°—ç–º–ø–ª–æ–≤ –Ω–∞ –ø–∏–∫—Å–µ–ª—å (AA)
```

### –°—Ü–µ–Ω–∞

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ `main()`:

```cpp
World world;
world.add(std::make_shared<Sphere>(Vec3d(0.0, 0.0, -1.0), 0.5));    // –°—Ñ–µ—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ
world.add(std::make_shared<Sphere>(Vec3d(0.0, -100.5, -1.0), 100.0)); // –ó–µ–º–ª—è
```

## üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞

### –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –ª—É—á–∞ —Å–æ —Å—Ñ–µ—Ä–æ–π

–†–µ—à–∞–µ—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ:

```
t¬≤ * (d¬∑d) + 2t * d¬∑(o-c) + (o-c)¬∑(o-c) - r¬≤ = 0
```

–≥–¥–µ:
- `d` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª—É—á–∞
- `o` - –Ω–∞—á–∞–ª–æ –ª—É—á–∞
- `c` - —Ü–µ–Ω—Ç—Ä —Å—Ñ–µ—Ä—ã
- `r` - —Ä–∞–¥–∏—É—Å —Å—Ñ–µ—Ä—ã

### –î–∏—Ñ—Ñ—É–∑–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ

```cpp
Vec3d ambient = Vec3d(0.3, 0.3, 0.3);           // –ë–∞–∑–æ–≤–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
Vec3d diffuse = 0.7 * (normal + Vec3d(1, 1, 1)) * 0.5;  // –î–∏—Ñ—Ñ—É–∑–Ω–æ–µ
return ambient + diffuse;
```

## üéØ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ü–µ–Ω–∞** (800x450, 100 samples/pixel):
- **Ryzen 5600X** (12 –ø–æ—Ç–æ–∫–æ–≤): ~5-10 —Å–µ–∫—É–Ω–¥
- **Core i5-9400F** (6 –ø–æ—Ç–æ–∫–æ–≤): ~15-20 —Å–µ–∫—É–Ω–¥

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —è–¥—Ä–∞)
- `lengthSquared()` –≤–º–µ—Å—Ç–æ `length()` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- Inline —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üîÆ Roadmap

- [ ] **–ú–∞—Ç–µ—Ä–∏–∞–ª—ã** (–º–µ—Ç–∞–ª–ª, –¥–∏—ç–ª–µ–∫—Ç—Ä–∏–∫–∏, –¥–∏—Ñ—Ñ—É–∑–Ω—ã–µ)
- [ ] **–û—Ç—Ä–∞–∂–µ–Ω–∏—è –∏ –ø—Ä–µ–ª–æ–º–ª–µ–Ω–∏—è** (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞)
- [ ] **–î—Ä—É–≥–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã** (–ø–ª–æ—Å–∫–æ—Å—Ç–∏, —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏, –º–µ—à–∏)
- [ ] **BVH —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—Ü–µ–Ω
- [ ] **–¢–µ–∫—Å—Ç—É—Ä—ã –∏ –Ω–æ—Ä–º–∞–ª-–º–∞–ø–ø–∏–Ω–≥**
- [ ] **Depth of field –∏ motion blur**

## üìö –†–µ—Å—É—Ä—Å—ã

–ü—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è—Ö –∏–∑:
- [Ray Tracing in One Weekend](https://raytracing.github.io/) - Peter Shirley
- [Physically Based Rendering](https://www.pbr-book.org/) - Matt Pharr & Greg Humphreys

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –¥–µ–ª–∞–π—Ç–µ —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ

## ü§ù –í–∫–ª–∞–¥

Pull requests welcome! –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue.

---

**Made with ‚òï and ray tracing magic**
